(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{443:function(t,e,n){var content=n(452);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("1f580885",content,!0,{sourceMap:!1})},451:function(t,e,n){"use strict";var r=n(443);n.n(r).a},452:function(t,e,n){(e=n(57)(!1)).push([t.i,"h2{margin-top:0}.image{width:100%}.ellipsis{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.start-time{padding-right:.3em}.vertical-align{vertical-align:middle!important}.progress-width{width:90%}.spacer{margin-right:.5em}div.cell i{font-size:2em}div.cell i:hover{color:#5cb6ff;cursor:pointer}div.el-progress{display:inline;margin-right:.5em}div.el-progress-bar{width:50%}",""]),t.exports=e},461:function(t,e,n){"use strict";n.r(e);n(19),n(20),n(11),n(72),n(32);var r=n(3),o=n(8),c=n(42),l=n(30),d=n(31),v=n(14),m=n(9),f=n(438),y=n(437),h=n(462),w=n(450),k=n(460),_=n(0),O=n.n(_),j=function(){function t(){Object(o.a)(this,t),this.stop$=new h.a,this.audioObj=new Audio}return Object(c.a)(t,[{key:"playStream",value:function(t){return this.streamObservable(t).pipe(Object(k.a)(this.stop$))}},{key:"play",value:function(){this.audioObj.play()}},{key:"pause",value:function(){this.audioObj.pause()}},{key:"stop",value:function(){this.stop$.next()}},{key:"seekTo",value:function(t){this.audioObj.currentTime=t}},{key:"formatTime",value:function(time,t){return O.a.utc(time).format(t)}},{key:"streamObservable",value:function(t){var e=this,n=["ended","error","play","playing","pause","timeupdate","canplay","loadedmetadata","loadstart"];return w.a.create((function(r){e.audioObj.src=t,e.audioObj.load(),e.audioObj.play();var o=function(t){return r.next(t)};return function(t,e,n){e.forEach((function(e){t.addEventListener(e,n)}))}(e.audioObj,n,o),function(){e.audioObj.pause(),e.audioObj.currentTime=0,function(t,e,n){e.forEach((function(e){t.removeEventListener(e,n)}))}(e.audioObj,n,o)}}))}}]),t}();function x(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var S=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(m.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},N=Object(y.namespace)("music"),C=Object(y.namespace)("audio"),R=function(t){Object(l.a)(f,t);var e,n,m=(e=f,function(){var t,n=Object(v.a)(e);if(x()){var r=Object(v.a)(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return Object(d.a)(this,t)});function f(){var t;return Object(o.a)(this,f),(t=m.apply(this,arguments)).currentIndex=-1,t.audioService=new j,t.downloadUrl="",t}return Object(c.a)(f,[{key:"mounted",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAlbumDetails(this.$route.params.id);case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"destroyed",value:function(){this.resetState()}},{key:"duration",value:function(){return this.media.duration}},{key:"openFile",value:function(t,e){this.currentFile=e,this.currentIndex=t,this.playStream(e.previewUrl)}},{key:"resetState",value:function(){this.audioService.stop(),this.reset()}},{key:"playStream",value:function(t){var e=this;this.resetState(),this.audioService.playStream(t).subscribe((function(t){var n=t.target;switch(t.type){case"canplay":return e.canPlay(!0);case"loadedmetadata":return e.loadedMetadata(n.duration);case"playing":return e.playing(!0);case"pause":return e.playing(!1);case"timeupdate":return e.timeUpdate(n.currentTime);case"loadstart":return e.loadStart(!0)}}))}},{key:"play",value:function(){this.audioService.play()}},{key:"pause",value:function(){this.audioService.pause()}},{key:"constructAlbumDetails",value:function(){var text=["Artist: ".concat(this.album.artistName),"Album: ".concat(this.album.collectionName),"Year: ".concat(this.album.releaseDate.substring(0,4)),"Genre: ".concat(this.album.primaryGenreName),"Extension: mp3"],t=0;return this.songs.forEach((function(e){e.discNumber!==t&&(text.push("Disc ".concat(e.discNumber,":")),t=e.discNumber),e.trackNumber<10?text.push("0".concat(e.trackNumber," - ").concat(e.trackName)):text.push("".concat(e.trackNumber," - ").concat(e.trackName))})),text.join("\r\n")}},{key:"download",value:function(){var data=new Blob([this.constructAlbumDetails()],{type:"text/plain"});this.downloadUrl=window.URL.createObjectURL(data)}},{key:"copyToClipboard",value:function(){var t=this;navigator.clipboard.writeText(this.constructAlbumDetails()).then((function(){t.$message({message:"Album copied to clipboard",type:"success"})}),(function(){t.$message.error("Error copying album to clipboard")}))}},{key:"validate",value:function(t){return/^\d+$/.test(t.params.id)}},{key:"noResults",get:function(){return!this.album.artistName}}]),f}(f.Vue);S([Object(f.Prop)({type:String})],R.prototype,"id",void 0),S([N.State],R.prototype,"loading",void 0),S([N.Getter],R.prototype,"album",void 0),S([N.Getter],R.prototype,"songs",void 0),S([N.Action],R.prototype,"getAlbumDetails",void 0),S([C.State],R.prototype,"media",void 0),S([C.Mutation],R.prototype,"reset",void 0),S([C.Mutation],R.prototype,"canPlay",void 0),S([C.Mutation],R.prototype,"loadedMetadata",void 0),S([C.Mutation],R.prototype,"playing",void 0),S([C.Mutation],R.prototype,"timeUpdate",void 0),S([C.Mutation],R.prototype,"loadStart",void 0);var D=R=S([Object(f.Component)({name:"music"})],R),$=(n(451),n(28)),component=Object($.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.noResults?n("div",[n("div",{staticClass:"text-xs-center"},[n("h2",[t._v("No Music ID in API with "+t._s(t.$route.params.id))])])]):n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-image",{staticClass:"image",attrs:{src:t.album.artworkUrl100}})],1),t._v(" "),n("el-col",{attrs:{span:16}},[n("div",{staticStyle:{padding:"14px"}},[n("h2",{staticClass:"ellipsis"},[t._v(t._s(t.album.artistName))]),t._v(" "),n("div",{staticClass:"bottom clearfix"},[n("div",{staticClass:"ellipsis"},[t._v("Title: "+t._s(t.album.collectionName))]),t._v(" "),n("div",[t._v("Date: "+t._s(t.album.releaseDate.substring(0,4)))]),t._v(" "),n("div",[t._v("Genre: "+t._s(t.album.primaryGenreName))]),t._v(" "),n("div",[t._v("Tracks: "+t._s(t.album.trackCount-1))]),t._v(" "),n("div",[n("a",{staticClass:"spacer",attrs:{download:"album.properties",href:t.downloadUrl}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-download",title:"Download Metadata",circle:"",size:"mini"},on:{click:function(e){return t.download()}}})],1),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-document-copy",title:"Copy to Clipboard",circle:"",size:"mini"},on:{click:function(e){return t.copyToClipboard()}}})],1)])])])],1),t._v(" "),n("el-row",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songs}},[n("el-table-column",{attrs:{prop:"trackNumber",label:"#","min-width":"40",width:"40"}}),t._v(" "),n("el-table-column",{attrs:{prop:"trackName",label:"Name"}}),t._v(" "),n("el-table-column",{attrs:{align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.currentIndex===e.$index?n("span",{staticClass:"vertical-align"},[n("span",{staticClass:"start-time"},[t._v(t._s(t.media.time))]),t._v(" "),n("el-progress",{staticClass:"hidden-xs-only",attrs:{percentage:t.media.percentage,format:t.duration}})],1):t._e(),t._v(" "),t.currentIndex!==e.$index?n("i",{staticClass:"el-icon-video-play vertical-align",on:{click:function(n){return t.openFile(e.$index,e.row)}}}):t._e(),t._v(" "),t.currentIndex===e.$index&&!1===t.media.playing?n("i",{staticClass:"el-icon-video-play vertical-align",on:{click:function(e){return t.play()}}}):t._e(),t._v(" "),t.currentIndex===e.$index&&!0===t.media.playing?n("i",{staticClass:"el-icon-video-pause vertical-align",on:{click:function(e){return t.pause()}}}):t._e()]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);